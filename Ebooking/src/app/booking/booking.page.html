<ion-header [translucent]="true">
    <ion-toolbar>
        <ion-buttons slot="start" *ngIf="parent">
            <ion-back-button defaultHref="/tabs/{{ parent }}"></ion-back-button>
        </ion-buttons>
    </ion-toolbar>
    <ion-progress-bar *ngIf="!booking" type="indeterminate"></ion-progress-bar>
</ion-header>


<ion-content [fullscreen]="true" *ngIf="booking && housing">
    <ion-item-group *ngIf="booking.id && housing.id; else booking_notfound">
        <ion-item-group class="visual-content">
            <ion-img src="../../assets/housing/{{housing.images[0].url}}" alt="{{ housing.name }}"></ion-img>
            <ion-text class="price">{{ booking.beginning_date | date : "d MMM" }} - {{ booking.ending_date | date : "d MMM" }}</ion-text>
            <ion-text class="date">Votre hôte : {{ housing.person.first_name }} {{ housing.person.last_name }}</ion-text>
        </ion-item-group>
        <ion-item-group class="text-content">
            <h1>{{ housing.name }}</h1>
            <p>{{ housing.city}}, {{ housing.country }}</p>
            <ion-list>
                <ion-item>
                    <ion-avatar>
                        <ion-icon name="people-outline"></ion-icon>
                    </ion-avatar>
                    <ion-label>
                        {{ housing.number_of_travellers }} voyageurs
                    </ion-label>
                </ion-item>
                <ion-item>
                    <ion-avatar>
                        <ion-icon name="bed-outline"></ion-icon>
                    </ion-avatar>
                    <ion-label>
                        {{ housing.number_of_bed }} lits · {{ housing.number_of_bedrooms }} chambres
                    </ion-label>
                </ion-item>
                <ion-item>
                    <ion-avatar>
                        <ion-icon name="water-outline"></ion-icon>
                    </ion-avatar>
                    <ion-label>
                        {{ housing.number_of_bathrooms }} salles de bain
                    </ion-label>
                </ion-item>
            </ion-list>
            <p>{{ housing.description }}</p>
        </ion-item-group>
        <ion-button *ngIf="booking && userType && userType == 'customer'" (click)="cancelBooking()">Annuler ma réservation</ion-button>
        <ion-button *ngIf="booking && booking.is_confirmed != 1 && userType && userType == 'owner'" (click)="confirmBooking()">Confirmer la location</ion-button>
    </ion-item-group>
    <ng-template #booking_notfound>
        <p>Pas de résultat.</p>
    </ng-template>
</ion-content>